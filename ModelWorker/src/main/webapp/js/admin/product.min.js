define(['common','simditor','uploader'],function(){

//    //初始化编辑器
//    CKEDITOR.replace('editor');
//
//    $('#underwriting').hide();
//    $("[name='priceModel']").on("click", function(){
//        if ($(this).val() == '1') {
//            $("#standardPercent").attr("disabled", true).val('');
//            $("#insurance").attr("disabled", true).val('');
//            $("#prefixName").attr("disabled", true).val('');
//            $("#standardPrice").removeAttr("disabled");
//
//        } else {
//            $("#standardPercent").removeAttr("disabled");
//            $("#insurance").removeAttr("disabled");
//            $("#standardPrice").attr("disabled", true).val('');
//            $("#prefixName").removeAttr("disabled");
//        }
//    });

    var editor = new Simditor({
        textarea: $('#editor') ,
        //optional options
        upload: false,
        defaultImage : 'http://www.fescoadecco.com/templets/default/images/logo.png',
        tabIndent: true,
        toolbar: ["title", "bold", "italic", "underline", "strikethrough", "fontScale", "color", "ol", "ul", "blockquote", "code", "table", "link", "image", "hr", "indent", "outdent", "alignment"],
        toolbarFloat: true,
        toolbarFloatOffset: 0,
        toolbarHidden: false,
        pasteImage: false,
        cleanPaste: false
    });

    $("[name='typeModel']").on("click", function(){
        if ($(this).val() == '1') {
            $('#otherbox').show();
        } else {
            $('#otherbox').hide();
        }
    });

    //是否要核保
    $('#check_y').on('click',function(){
        if($('#check_y').prop('checked')) {
            $('#underwriting').show();
        } else {
            $('#underwriting').hide();
        }
    });

    $('#addPrice').on('click',function(e) {
        $('#priceBox tbody').append('<tr><td align="center">'+($('#priceBox tbody tr').length+1)+'</td><td><input class="form-control input-sm" type="text"></td><td><input class="form-control input-sm" type="text"></td><td><input class="form-control input-sm" type="text"></td><td><button type="button" class="btn btn-success input-xs">保存</button></td></tr>');
    });



    $("#category").change(function(){
        var current = $(this).find("option:selected");
        var type    = $(current).attr('type') || $(current).parent().attr('type')
        if(type == 'baoxian'){
            $('#otherbox1,#otherbox2').show();
            $('.baoxian').show()
            $('.cards').hide()
            $('.once').hide()
        }
        else if(type == "card"){
            $('#otherbox1,#otherbox2').hide();
            $('.baoxian').hide();
            $('.once').hide();
            $('.cards').removeClass('hidden').show();
        }
        else{
            $('#otherbox1,#otherbox2').hide();
            $('.cards').hide();
            $('.baoxian').hide();
            $('.once').removeClass('hidden').show();
        }
    });


    $("input[name=priceType]").change(function(){
        if($(this).val() == 'price'){
            $('.rate-iterm').hide()
        }else{
            $('.rate-iterm').show()
        }
    })

    $(".upload-picker").upload();

    $("#uploadbtn").click(function(){

        $(".upload-picker").on("queue", function(event, file, md5, ret){
                handles = $(this).data("uploader");
                console.log(ret)
            })
            .on("success", function(event, rs, file, thumb){
                //如果没有预览框的情况下,上传成功后可以返回缩略图,插回页面中
                //var t = $("<img src='"+ thumb +"'/>")
                //$("body").append(t)
            })
            .on("error", function(event, file, err){
                console.log("error",err)
            })
            .on("complete", function(event, file){
                //console.log("complete",file)
            }).data("uploader").handle.upload()

        return false;

    })



})


